@{
    ViewData["Title"] = "Points & Receipts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    ViewData["NavSection"] = "User";
}

<!-- Scoped styles for Points only -->
<style>
    .points .form-control, .points select {
        background-color: var(--surface-color) !important;
        color: var(--text-color) !important;
        border: 1px solid var(--border-color) !important;
        border-radius: 8px !important;
        padding: 10px 12px !important;
        width: 100%;
    }

        .points .form-control::placeholder {
            color: var(--muted-text-color) !important;
        }

        .points .form-control:focus, .points select:focus {
            outline: none !important;
            border-color: var(--primary-color) !important;
            box-shadow: 0 0 0 0.15rem var(--accent-color) !important;
        }

    /* Receipt cards */
    .points .receipt-card {
        border-left: 4px solid var(--border-color);
        background-color: var(--surface-color);
        border: 1px solid var(--border-color);
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
    }

    .points .receipt-earn {
        border-left-color: var(--success-color);
    }

    .points .receipt-deduct {
        border-left-color: var(--error-color);
    }

    .points .amount-positive {
        color: var(--success-color);
        font-weight: 700;
    }

    .points .amount-negative {
        color: var(--error-color);
        font-weight: 700;
    }

    .points .chip {
        display: inline-block;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid var(--border-color);
        margin-left: 8px;
    }

    .points .chip-earn {
        border-color: var(--success-color);
        color: var(--success-color);
    }

    .points .chip-deduct {
        border-color: var(--error-color);
        color: var(--error-color);
    }

    .points .caption {
        color: var(--muted-text-color);
    }
</style>

<div class="points">

    <!-- Header / Nav -->
    <div class="d-flex justify-content-between align-items-center mb-16">
        <h1 class="mb-0">Points &amp; Receipts</h1>
        <div class="d-flex gap-2">
            <a asp-controller="Home" asp-action="Dashboard" class="btn btn-secondary">← Back to Dashboard</a>
            <a asp-controller="Home" asp-action="Profile" class="btn btn-outline-secondary">Profile</a>
        </div>
    </div>

    <!-- Controls (optional; UI only for now) -->
    <div class="card shadow p-24 mb-16">
        <div class="row g-3">
            <div class="col-md-4">
                <label for="searchReceipts" class="form-label">Search</label>
                <input id="searchReceipts" type="text" class="form-control" placeholder="Search by justification or reference" />
            </div>
            <div class="col-6 col-md-2">
                <label for="fromDate" class="form-label">From</label>
                <input id="fromDate" type="date" class="form-control" />
            </div>
            <div class="col-6 col-md-2">
                <label for="toDate" class="form-label">To</label>
                <input id="toDate" type="date" class="form-control" />
            </div>
            <div class="col-6 col-md-2">
                <label for="typeFilter" class="form-label">Type</label>
                <select id="typeFilter" class="form-select">
                    <option value="all">All</option>
                    <option value="earn">Earn</option>
                    <option value="deduct">Deduct</option>
                </select>
            </div>
            <div class="col-6 col-md-2 d-flex align-items-end">
                <button class="btn btn-outline-primary w-100" disabled>Apply Filters</button>
            </div>
        </div>
    </div>

    <!-- Ledger summary (optional placeholder) -->
    <div class="card shadow p-24 mb-16">
        <div class="row">
            <div class="col-md-4 mb-8">
                <div class="d-flex justify-content-between">
                    <div>Total Earned</div><strong>[ ... ]</strong>
                </div>
            </div>
            <div class="col-md-4 mb-8">
                <div class="d-flex justify-content-between">
                    <div>Total Deducted</div><strong>[ ... ]</strong>
                </div>
            </div>
            <div class="col-md-4 mb-8">
                <div class="d-flex justify-content-between">
                    <div>Current Balance</div><strong>[ ... ]</strong>
                </div>
            </div>
        </div>
    </div>

    <!-- Receipts list (cards) -->
    <div>
        @* Empty state (no data yet) 
        <div class="receipt-card shadow d-flex justify-content-between align-items-start">
            <div>
                <div class="caption">Date: [ — ]</div>
                <div class="mt-8">No point transactions to display yet.</div>
            </div>
        </div>*@

        @* ----------------------------------------------------------------*@
        Example transaction card structure (REFERENCE ONLY — not rendered)
        <div class="receipt-card receipt-earn shadow">
        <div class="d-flex justify-content-between align-items-start">
        <div>
        <div class="caption">Date: 2025-09-10</div>
        <div class="mt-8"><strong>Justification:</strong> Event participation - Park Clean-up</div>
        <div class="caption mt-8">Reference: EVT-2025-00034</div>
        </div>
        <div class="text-end">
        <div class="amount-positive">+25</div>
        <span class="chip chip-earn">Earn</span>
        </div>
        </div>
        </div>

        <div class="receipt-card receipt-deduct shadow">
        <div class="d-flex justify-content-between align-items-start">
        <div>
        <div class="caption">Date: 2025-09-12</div>
        <div class="mt-8"><strong>Justification:</strong> No-show penalty</div>
        <div class="caption mt-8">Reference: PEN-2025-00412</div>
        </div>
        <div class="text-end">
        <div class="amount-negative">-10</div>
        <span class="chip chip-deduct">Deduct</span>
        </div>
        </div>
        </div>
        @* ---------------------------------------------------------------- *@
    </div>

    <!-- Pagination Placeholder -->
    <div class="d-flex justify-content-between align-items-center mt-16">
        <div class="caption text-muted">Showing 0 of 0</div>
        <div>
            <button class="btn btn-outline-secondary btn-sm" disabled>Previous</button>
            <button class="btn btn-outline-secondary btn-sm" disabled>Next</button>
        </div>
    </div>
</div>

@* --------------------------------------------------------------------
   TODO: Enable Points & Receipts Functionality
   - Bind transactions: { date, type (earn/deduct), amount, justification, reference }
   - Sort newest → oldest; implement filters & pagination
   - Compute totals (earned, deducted, current balance)
   - (Optional) "View Receipt" detail or PDF download per transaction
   - Auth guard: require sign-in
--------------------------------------------------------------------- *@
